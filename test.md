
# Liquid Silk 测试方案与 Bug 收集文档

## 一、测试策略

```
              ┌───────────┐
             │   E2E 测试  │  关键路径
            └───────────┘
          ┌───────────────┐
         │   集成测试      │  WebSocket同步
        └───────────────┘
      ┌─────────────────────┐
     │     单元测试          │  核心算法
    └─────────────────────┘
```

---

## 二、功能测试用例

### 2.1 动态壁纸渲染

| 编号 | 测试用例 | 测试步骤 | 预期结果 | 优先级 |
|------|----------|----------|----------|--------|
| T001 | 粒子系统初始化 | 启动应用 | 10万+粒子正常渲染 | P0 |
| T002 | 星空背景显示 | 启动应用 | 黑色星空背景正常显示 | P0 |
| T003 | 金属光泽效果 | 观察粒子 | 粒子呈现金属银色光泽 | P1 |
| T004 | 边缘辉光效果 | 观察粒子边缘 | 边缘有光晕效果 | P1 |
| T005 | 帧率测试 | 运行60秒 | 稳定在 60FPS | P0 |

### 2.2 手势交互功能

| 编号 | 测试用例 | 测试步骤 | 预期结果 | 优先级 |
|------|----------|----------|----------|--------|
| T101 | 摄像头权限申请 | 首次启动 | 弹出权限请求对话框 | P0 |
| T102 | 滑动手势-水平 | 手指水平移动 | 粒子水平流动 | P0 |
| T103 | 滑动手势-垂直 | 手指垂直移动 | 粒子垂直流动 | P0 |
| T104 | 捏合手势-放大 | 拇指食指张开 | 粒子系统放大 | P0 |
| T105 | 捏合手势-缩小 | 拇指食指合拢 | 粒子系统缩小 | P0 |
| T106 | 旋转手势 | 手部旋转 | 星空视角同步旋转 | P0 |
| T107 | 手势防抖 | 快速连续操作 | 无卡顿、无误触发 | P1 |

### 2.3 多设备同步

| 编号 | 测试用例 | 测试步骤 | 预期结果 | 优先级 |
|------|----------|----------|----------|--------|
| T201 | 设备连接 | 两设备打开应用 | 显示"已连接"状态 | P0 |
| T202 | 主设备申请 | 点击"设为主设备" | 成为操控端 | P0 |
| T203 | 状态同步-滑动 | 主设备滑动 | 从设备200ms内同步 | P0 |
| T204 | 状态同步-捏合 | 主设备捏合 | 从设备200ms内同步 | P0 |
| T205 | 断连重连 | 断开后恢复 | 自动重连并同步状态 | P0 |
| T206 | 主设备切换 | 从设备申请为主设备 | 原主设备自动降级 | P1 |

### 2.4 状态持久化

| 编号 | 测试用例 | 测试步骤 | 预期结果 | 优先级 |
|------|----------|----------|----------|--------|
| T301 | 配置保存 | 修改颜色后刷新 | 颜色配置保留 | P1 |
| T302 | 配置导出 | 点击导出按钮 | 生成配置文件 | P2 |
| T303 | 配置导入 | 上传配置文件 | 配置恢复成功 | P2 |

---

## 三、性能测试方案

### 3.1 帧率测试

| 设备类型 | 目标帧率 | 降级帧率 |
|----------|----------|----------|
| 高性能台式机 | ≥ 60 FPS | - |
| 主流笔记本 | ≥ 60 FPS | 50 FPS |
| 低配设备 | ≥ 50 FPS | 40 FPS |

### 3.2 延迟测试

| 测试项 | 目标值 |
|--------|--------|
| 手势识别延迟 | ≤ 50ms |
| WebSocket 同步延迟 | ≤ 200ms |
| 粒子渲染延迟 | ≤ 16.67ms |

### 3.3 内存测试

| 场景 | 内存上限 |
|------|----------|
| 10万粒子 | < 500MB |
| 5万粒子（降级） | < 300MB |
| 长时间运行（1h） | 无明显泄漏 |

---

## 四、兼容性测试矩阵

| 设备 | 系统 | 浏览器 | 状态 |
|------|------|--------|------|
| MacBook Pro | macOS 14 | Chrome 120 | ⬜ |
| MacBook Pro | macOS 14 | Firefox 120 | ⬜ |
| Windows PC | Windows 11 | Chrome 120 | ⬜ |
| Windows PC | Windows 11 | Edge 120 | ⬜ |
| iPhone 13 | iOS 17 | Safari | ⬜ |
| Android 手机 | Android 13 | Chrome | ⬜ |

---

## 五、Bug 收集模板

### 5.1 Bug 报告格式

```markdown
## Bug #XXX: [简短标题]

### 基本信息
- 发现时间: YYYY-MM-DD
- 严重程度: P0/P1/P2/P3
- 影响模块: 渲染/交互/同步/存储
- 测试环境: 设备、系统、浏览器

### 复现步骤
1. 步骤一
2. 步骤二
3. 步骤三

### 实际结果
[描述实际发生的情况]

### 预期结果
[描述应该发生的情况]

### 附加信息
- 截图/录屏
- 错误日志
- 复现频率
```

### 5.2 严重程度定义

| 级别 | 定义 | 示例 |
|------|------|------|
| P0 | 致命 Bug，完全无法使用 | 应用无法启动 |
| P1 | 严重 Bug，核心功能受影响 | 手势识别完全失效 |
| P2 | 中等 Bug，影响体验但可绕过 | 同步偶尔延迟 >500ms |
| P3 | 轻微 Bug，不影响主要功能 | UI 样式小问题 |

---

## 六、Bug 记录表

| ID | 标题 | 严重程度 | 状态 | 发现时间 | 负责人 |
|----|------|----------|------|----------|--------|
| - | - | - | - | - | - |

**状态说明:**
- 🆕 新建
- 🔍 调查中
- 🛠️ 修复中
- ✅ 已修复
- ❌ 无法复现
- 📝 延期处理

---

## 七、测试通过标准

### 7.1 发布准入条件

- [ ] 所有 P0 Bug 已修复
- [ ] P1 Bug 修复率 ≥ 90%
- [ ] 核心功能测试用例通过率 = 100%
- [ ] 性能指标符合要求
- [ ] 至少 3 种主流浏览器测试通过

### 7.2 质量目标

| 指标 | 目标值 |
|------|--------|
| 手势识别准确率 | ≥ 85% |
| 帧率达标率 | ≥ 95% |
| 同步成功率 | ≥ 99% |
| 用户满意度 | ≥ 4.0/5.0 |

